[{"attributes":{"type":"skuid__Page__c","url":"/services/data/v31.0/sobjects/skuid__Page__c/a04J0000009eHaPIAU"},"Id":"a04J0000009eHaPIAU","Name":"MyApplications","skuid__Type__c":"Desktop","skuid__UniqueId__c":"_MyApplications","skuid__Module__c":null,"skuid__Layout__c":"<skuidpage showsidebar=\"false\" showheader=\"true\" unsavedchangeswarning=\"\">\n   <models>\n      <model id=\"Accounts\" limit=\"\" query=\"true\" createrowifnonefound=\"false\" type=\"aggregate\" sobject=\"Account\">\n         <fields>\n            <field id=\"Id\" name=\"countId\" function=\"COUNT\"/>\n         </fields>\n         <conditions>\n            <condition type=\"userinfo\" value=\"\" field=\"OwnerId\" operator=\"=\" enclosevalueinquotes=\"true\" userinfotype=\"userid\"/>\n         </conditions>\n         <groupby method=\"simple\">\n            <field id=\"Status__c\" name=\"statusc\"/>\n         </groupby>\n         <actions/>\n      </model>\n      <model id=\"Applications\" limit=\"\" query=\"true\" createrowifnonefound=\"false\" sobject=\"Application__c\" type=\"aggregate\">\n         <fields>\n            <field id=\"Id\" name=\"ApplicationcountId\" function=\"COUNT\"/>\n         </fields>\n         <conditions>\n            <condition type=\"userinfo\" value=\"\" field=\"Account__r.OwnerId\" operator=\"=\" enclosevalueinquotes=\"true\" userinfotype=\"userid\"/>\n            <condition type=\"multiple\" value=\"\" field=\"Status__c\" operator=\"in\" enclosevalueinquotes=\"true\">\n               <values>\n                  <value>Red</value>\n                  <value>Amber</value>\n                  <value>White</value>\n                  <value>Green</value>\n               </values>\n            </condition>\n         </conditions>\n         <groupby method=\"simple\">\n            <field id=\"Status__c\" name=\"applicationstatusc\"/>\n         </groupby>\n         <actions/>\n      </model>\n      <model id=\"ApplicationsList\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" sobject=\"Application__c\">\n         <fields>\n            <field id=\"LTV__c\"/>\n            <field id=\"Lender__c\"/>\n            <field id=\"Lender__r.Name\"/>\n            <field id=\"CreatedDate\"/>\n            <field id=\"Lead_Applicant_Name__c\"/>\n            <field id=\"Loan_Amount__c\"/>\n            <field id=\"Status__c\"/>\n            <field id=\"Id\"/>\n            <field id=\"Sub_Status__c\"/>\n            <field id=\"Account__c\"/>\n            <field id=\"Account__r.Name\"/>\n         </fields>\n         <conditions>\n            <condition type=\"userinfo\" value=\"\" field=\"Case_Owner__c\" operator=\"=\" enclosevalueinquotes=\"true\" userinfotype=\"userid\"/>\n            <condition type=\"multiple\" value=\"\" field=\"Status__c\" operator=\"not in\" enclosevalueinquotes=\"true\">\n               <values>\n                  <value>Paid Out</value>\n                  <value>Cancelled</value>\n               </values>\n            </condition>\n            <condition type=\"multiple\" value=\"\" field=\"Status__c\" operator=\"in\" enclosevalueinquotes=\"true\" state=\"filterableoff\" inactive=\"true\" name=\"Status__c\">\n               <values>\n                  <value>White</value>\n                  <value>Red</value>\n                  <value>Amber</value>\n                  <value>Green</value>\n                  <value>Paid Out</value>\n               </values>\n            </condition>\n            <condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Sub_Status__c\" state=\"filterableoff\" inactive=\"true\" name=\"Sub_Status__c\"/>\n            <condition type=\"fieldvalue\" value=\"\" enclosevalueinquotes=\"true\" field=\"Account__c\" state=\"filterableoff\" inactive=\"true\" name=\"Account__c\"/>\n         </conditions>\n         <actions/>\n      </model>\n      <model id=\"UsersAccounts\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" sobject=\"Account\">\n         <fields/>\n         <conditions>\n            <condition type=\"userinfo\" value=\"\" field=\"OwnerId\" operator=\"=\" enclosevalueinquotes=\"true\" userinfotype=\"userid\"/>\n         </conditions>\n         <actions/>\n      </model>\n   <model id=\"UnassignedApplications\" limit=\"20\" query=\"true\" createrowifnonefound=\"false\" sobject=\"Application__c\"><fields><field id=\"Name\"/><field id=\"Campaign__c\"/><field id=\"Campaign__r.Name\"/><field id=\"Case_Owner__c\"/><field id=\"Case_Owner__r.Name\"/><field id=\"CreatedDate\"/><field id=\"Loan_Amount__c\"/></fields><conditions><condition type=\"blank\" value=\"null\" field=\"Case_Owner__c\" operator=\"=\" enclosevalueinquotes=\"false\"/></conditions><actions/></model></models>\n   <components>\n      <pagetitle model=\"UnassignedApplications\" uniqueid=\"\">\n         <maintitle>\n         </maintitle>\n         <subtitle>\n         </subtitle>\n         <actions><action type=\"popup\" label=\"Unassigned Applications\" window=\"self\"><popup title=\"Unassigned Applications\" width=\"800\"><components><pagetitle model=\"UnassignedApplications\"><actions><action type=\"multi\" window=\"self\" rollbackonanyerror=\"true\" label=\"Save\" icon=\"sk-icon-save\"><models><model>Applications</model><model>ApplicationsList</model></models><actions><action type=\"save\" rollbackonanyerror=\"true\"><models><model>Applications</model><model>ApplicationsList</model><model>UnassignedApplications</model></models></action><action type=\"requeryModel\" model=\"UnassignedApplications\"/></actions></action><action type=\"cancel\" label=\"Cancel\" window=\"self\"><models><model>Applications</model><model>ApplicationsList</model></models></action></actions></pagetitle><skootable showconditions=\"true\" showsavecancel=\"false\" searchmethod=\"server\" searchbox=\"true\" showexportbuttons=\"false\" pagesize=\"25\" createrecords=\"false\" model=\"UnassignedApplications\" buttonposition=\"\" mode=\"read\"><fields><field id=\"Name\"/><field id=\"Campaign__c\" readonly=\"true\" allowordering=\"true\"/><field id=\"Case_Owner__c\" allowordering=\"true\"/><field id=\"CreatedDate\" readonly=\"true\" allowordering=\"true\"/><field id=\"Loan_Amount__c\" readonly=\"true\" allowordering=\"true\"/></fields><rowactions><action type=\"edit\"/></rowactions><massactions usefirstitemasdefault=\"true\"><action type=\"massupdate\"/></massactions><views><view type=\"standard\"/></views><searchfields/><renderconditions/></skootable></components></popup></action></actions>\n      </pagetitle>\n      <panelset type=\"standard\">\n         <panels>\n            <panel type=\"left\" width=\"225\">\n               <components>\n                  <template multiple=\"false\" model=\"Accounts\" allowhtml=\"true\">\n                     <contents>&lt;a href=\"URL OF YOUR DRILL DOWN DETAILS PAGE\"&gt;\n&lt;div class = \"box\"&gt;\n&lt;div class = \"nx-pagetitle-subtitle\"&gt; {{statusc}} Accounts &lt;/div&gt;\n&lt;div class = \"nx-pagetitle-maintitle\"&gt;  {{countId}}\n&lt;/div&gt;\n&lt;div class = \"bottomtext\"&gt; Details &lt;/div&gt;\n&lt;/div&gt;&lt;/a&gt;</contents>\n                  </template>\n               </components>\n            </panel>\n            <panel>\n               <components>\n                  <pagetitle model=\"Accounts\">\n                     <actions>\n                        <action type=\"popup\" label=\"New Application\" window=\"self\" icon=\"sk-icon-page-add\">\n                           <popup title=\"New Application\" width=\"800\">\n                              <components>\n                                 <includepanel type=\"skuid\" pagename=\"NewApplication\" module=\"\"/>\n                              </components>\n                           </popup>\n                        <actions><action type=\"showPopup\"><popup title=\"New Popup\" width=\"800\"><components><includepanel type=\"skuid\" pagename=\"NewApplication\" module=\"\"/></components></popup></action><action type=\"custom\" snippet=\"stepChangeCommonCode\"/></actions></action>\n                     </actions>\n                     <maintitle>Current Live Applications</maintitle>\n                  </pagetitle>\n                  <skootable showconditions=\"true\" showsavecancel=\"false\" searchmethod=\"server\" searchbox=\"true\" showexportbuttons=\"false\" pagesize=\"10\" createrecords=\"false\" buttonposition=\"\" mode=\"readonly\" model=\"ApplicationsList\">\n                     <fields>\n                        <field id=\"Lead_Applicant_Name__c\" allowordering=\"true\"/>\n                        <field id=\"Loan_Amount__c\" allowordering=\"true\"/>\n                        <field id=\"Status__c\" allowordering=\"true\"/>\n                        <field id=\"Sub_Status__c\" allowordering=\"true\"/>\n                        <field id=\"CreatedDate\" allowordering=\"true\"/>\n                        <field id=\"LTV__c\" allowordering=\"true\"/>\n                        <field id=\"Account__c\" allowordering=\"true\"/>\n                        <field id=\"Lender__c\" allowordering=\"true\"/>\n                     </fields>\n                     <rowactions>\n                        <action type=\"redirect\" label=\"Go to Application\" url=\"https://skuid.na12.visual.force.com/apex/UI?id={{Id}}&amp;sfdc.override=1&amp;actiontype=View&amp;objecttype=Application__c\" icon=\"sk-icon-arrow-right\" window=\"self\"/>\n                     </rowactions>\n                     <massactions usefirstitemasdefault=\"true\"/>\n                     <views>\n                        <view type=\"standard\"/>\n                     </views>\n                     <filters>\n                        <filter type=\"select\" filteroffoptionlabel=\"All Status\" createfilteroffoption=\"true\" affectcookies=\"true\" autocompthreshold=\"25\" condition=\"Status__c\">\n                           <sources>\n                              <source type=\"metadata\" effectsbehavior=\"justdefault\" prefix=\"Status: \"/>\n                           </sources>\n                        </filter>\n                        <filter type=\"select\" filteroffoptionlabel=\"All Sub Status\" createfilteroffoption=\"true\" affectcookies=\"true\" autocompthreshold=\"25\" condition=\"Sub_Status__c\">\n                           <sources>\n                              <source type=\"metadata\" effectsbehavior=\"justdefault\" prefix=\"Sub Status: \"/>\n                           </sources>\n                        </filter>\n                        <filter type=\"select\" filteroffoptionlabel=\"All Accounts\" createfilteroffoption=\"true\" affectcookies=\"true\" autocompthreshold=\"25\" condition=\"Account__c\">\n                           <sources>\n                              <source type=\"model\" effectsbehavior=\"justdefault\" model=\"UsersAccounts\">\n                                 <labeltemplate>{{{Name}}}</labeltemplate>\n                                 <valuetemplate>{{Id}}</valuetemplate>\n                              </source>\n                           </sources>\n                        </filter>\n                     </filters>\n                  </skootable>\n               </components>\n            </panel>\n            <panel type=\"left\" width=\"225\">\n               <components>\n                  <template multiple=\"false\" model=\"ApplicationsList\" allowhtml=\"true\">\n                     <contents>&lt;a href=\"URL OF YOUR DRILL DOWN DETAILS PAGE\"&gt;\n&lt;div class = \"box\"&gt;\n&lt;div class = \"nx-pagetitle-subtitle\"&gt; {{applicationstatusc}} Applications &lt;/div&gt;\n&lt;div class = \"nx-pagetitle-maintitle\"&gt;  {{ApplicationcountId}}\n&lt;/div&gt;\n&lt;div class = \"bottomtext\"&gt; Details &lt;/div&gt;\n&lt;/div&gt;&lt;/a&gt;</contents>\n                  </template>\n               </components>\n            </panel>\n         </panels>\n      </panelset>\n   </components>\n   <resources>\n      <labels/>\n      <javascript><jsitem location=\"staticresource\" name=\"PostcodeAnywhere\" cachelocation=\"false\" url=\"\" filepath=\"address.js\" namespace=\"pca\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"staticresource\" name=\"PostcodeAnywhere\" cachelocation=\"false\" url=\"\" namespace=\"pca\" filepath=\"editpage.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"inline\" name=\"setElementIds\" cachelocation=\"false\" url=\"\">(function(skuid){ \nvar $ = skuid.$; \n\n$(document.body).one('pageload',function() {\n\n\n        $(function(){ \n             \n\n            var elems = document.getElementsByTagName(\"*\"), i;\n            var arrayLength = elems.length;\n            for (i = 0; i &lt; arrayLength; i++) {\n                if(elems[i].innerHTML == \"House Name/Number\"){\n                    i++;\n                    i++;\n                    elems[i].setAttribute(\"id\",\"acc2014housename\");\n                    i++;\n                }\n                if(elems[i].innerHTML == \"Street Address\"){\n                    i++;\n                    i++;\n                    elems[i].setAttribute(\"id\",\"acc20112014street\");\n                    i++;\n                }\n                 if(elems[i].innerHTML == \"Town\"){\n                    i++;\n                    i++;\n                    elems[i].setAttribute(\"id\",\"acc20112014city\");\n                    i++;\n                }\n                if(elems[i].innerHTML == \"County\"){\n                    i++;\n                    i++;\n                    elems[i].setAttribute(\"id\",\"acc20112014state\");\n                    i++;\n                }\n                 if(elems[i].innerHTML == \"Postcode\"){\n                    i++;\n                    i++;\n                    elems[i].setAttribute(\"id\",\"acc20112014zip\");\n                    i++;\n                }\n            }\n        });\n    load_js();\n   \n});\nfunction load_js()\n   {\n      var head= document.getElementsByTagName('head')[0];\n      \n      var script3= document.createElement('script');\n      script3.type= 'text/javascript';\n      script3.src= '/apex/pca__EditPageSettings';\n      head.appendChild(script3);\n      \n      var script1= document.createElement('script');\n      script1.type= 'text/javascript';\n      script1.src= '/resource/pca__PostcodeAnywhere/address.js';\n      head.appendChild(script1);\n      \n      var script2= document.createElement('script');\n      script2.type= 'text/javascript';\n      script2.src= '/resource/pca__PostcodeAnywhere/editpage.js';\n      head.appendChild(script2);\n      \n      \n      \n     \n   }\n})(skuid);</jsitem><jsitem location=\"staticresource\" name=\"streaming\" cachelocation=\"false\" url=\"\" filepath=\"streaming/cometd.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"staticresource\" name=\"streaming\" cachelocation=\"false\" url=\"\" filepath=\"streaming/jquery.cometd.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"staticresource\" name=\"streaming\" cachelocation=\"false\" url=\"\" filepath=\"streaming/jquery-1.5.1.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"staticresource\" name=\"streaming\" cachelocation=\"false\" url=\"\" filepath=\"streaming/json2.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem><jsitem location=\"inline\" name=\"ChatterApplicationAssignNotification\" cachelocation=\"false\" url=\"\">(function(skuid){\t\n     var $ = skuid.$;\n     $(function(){\n        \n        //Execute the below to create a Subscription\n        // PushTopic pushTopic = new PushTopic();\n        // pushTopic.Name = 'UpdateApplication';\n        // pushTopic.Query = 'Select Name, Case_Owner__c, Loan_Amount__c, Id from Application__c';\n        // pushTopic.ApiVersion = 32.0;\n        // pushTopic.NotifyForOperationCreate = false;\n        // pushTopic.NotifyForOperationUpdate = true;\n        // pushTopic.NotifyForOperationUndelete = false;\n        // pushTopic.NotifyForOperationDelete = false;\n        // pushTopic.NotifyForFields = 'Referenced';\n        // insert pushTopic;\n        // System.debug('Created new PushTopic: '+ pushTopic.Id);\n        \n        \n        //Get the Id of the current logged in User\n        var currentUser = skuid.utils.mergeAsText('global','{{$Api.User_Id}}');\n        //Get the Session Id\n        var sid = skuid.utils.mergeAsText('global','{{$Api.Session_Id}}');\n        //Establishes the Salesforce connection based on the user's session\n        sforce.connection.sessionId = sid;\n        \n        //If the below is true we shall show the Alert for all Users\n        var isTest = skuid.utils.mergeAsText('global','{{$Param.isTest}}');\n        \n        \n        // for success - green box - toastr.success('success messages');\n        // for errors - red box - toastr.error('errors messages');\n        // for warning - orange box - toastr.warning('warning messages');\n        // for info - blue box - toastr.info('info messages');\n        \n        toastr.options = {\n          \"closeButton\": true,\n          \"debug\": false,\n          \"progressBar\": false,\n          \"positionClass\": \"toast-bottom-right\", //'toast-top-right';\n          \"onclick\": null,\n          \"showDuration\": \"300\",\n          \"hideDuration\": \"1000\",\n          \"timeOut\": \"0\",           //5000 if tapToDismiss=true\n          \"extendedTimeOut\": \"0\",   //1000 if tapToDismiss=true\n          \"showEasing\": \"swing\",\n          \"hideEasing\": \"linear\",\n          \"showMethod\": \"fadeIn\",\n          \"tapToDismiss\": false,    //true\n          \"hideMethod\": \"fadeOut\"\n        }\n        \n        // Connect to the CometD endpoint\n        $.cometd.init({\n        url: window.location.protocol+'//'+window.location.hostname+'/cometd/23.0/',\n        requestHeaders: { Authorization: 'OAuth '+sid}\n        \n        });\n\n        \n        // Subscribe to a topic. Alert for an New/Updated Application.\n        // As the Application is updated by a Trigger when it is created\n        // we can just subscribe to UpdateApplication and ignore CreateApplication\n        $.cometd.subscribe('/topic/UpdateApplication', function(message) {\n\n            caseOwner = message.data.sobject.Case_Owner__c;\n            if(currentUser === caseOwner || isTest === 'true'){\n                toastr.error('&lt;div&gt;You have been assigned: &amp;nbsp;&lt;a href='+window.location.protocol+'//'+window.location.hostname+'/apex/skuid__ui?page=ApplicationView&amp;id='+message.data.sobject.Id+' target=\"_blank\"&gt;'+message.data.sobject.Name+'&lt;/a&gt; with Loan Amount £'+message.data.sobject.Loan_Amount__c+'&lt;/div&gt;', 'Application Assignment');\n            }\n            \n        });\n        \n     });\n     \n   \n})(skuid);</jsitem><jsitem location=\"staticresource\" name=\"toastr\" cachelocation=\"false\" url=\"\" filepath=\"toastr/toastr.js\">var params = arguments[0],\n\t$ = skuid.$;\n</jsitem></javascript>\n      <css>\n         <cssitem location=\"inline\" name=\"BlueBox\" cachelocation=\"false\">.box{\n        padding:8px;\n        background-color: LightBlue; \n        border-width: 2px;\n        border-color: Navy;\n        height: 75px;\n        margin: 4px;\n        position: relative;\n}\n.bottomtext {\n    text-decoration:underline;\n    position: absolute;\n    bottom: 8px;\n    width: 100%;\n    text-align: left;\n}</cssitem>\n      <cssitem location=\"staticresource\" name=\"sticky\" cachelocation=\"true\" url=\"\" filepath=\"sticky/sticky.full.css\"/><cssitem location=\"staticresource\" name=\"toastr\" cachelocation=\"true\" url=\"\" filepath=\"toastr/toastr.css\"/></css>\n   </resources>\n</skuidpage>","skuid__Layout2__c":null,"skuid__Layout3__c":null,"skuid__Layout4__c":null,"skuid__Layout5__c":null}]